<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Family Film Journal - Curated film recommendations and viewing guides for parents of children aged 6–12. Cinema that sparks family conversations." name="description"/>
    <title>Family Film Journal | Cinema that sparks family conversations</title>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&amp;family=Source+Sans+3:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <style>
        :root {
            --shelf-bg: #1e2225;
            --color-top: #f6f1fa;
            --color-bottom: #1f2124;
            --color-card: #faf8f5;
            --color-ink: #1a1a1a;
            --color-ink-on-dark: #f3f3f3;
            --color-muted: #6b6b6b;
            --color-muted-on-dark: rgba(243, 243, 243, 0.72);
            --color-accent: #8b4513;
            --color-accent-light: rgba(139, 69, 19, 0.18);
            --color-border: rgba(26, 26, 26, 0.12);
            --color-border-on-dark: rgba(243, 243, 243, 0.16);
            --font-logo: 'DM Serif Display', Georgia, serif;
            --font-body: 'Source Sans 3', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --wrap-narrow: 760px;
            --wrap-wide: 1360px;
            --spacing-unit: 1.5rem;
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { font-size: 18px; scroll-behavior: smooth; }
        body { font-family: var(--font-body); line-height: 1.6; color: var(--color-ink); background: var(--color-top); min-height: 100vh; display: flex; flex-direction: column; }
        
        .skip-link { position: absolute; top: -100%; left: 50%; transform: translateX(-50%); background: var(--color-ink); color: var(--color-card); padding: 0.75rem 1.5rem; text-decoration: none; border-radius: 0 0 4px 4px; z-index: 1000; transition: top 0.2s ease; }
        .skip-link:focus { top: 0; outline: 3px solid var(--color-accent); outline-offset: 2px; }
        :focus-visible { outline: 3px solid var(--color-accent); outline-offset: 3px; }

        .wrap { width: 100%; margin: 0 auto; }
        .wrap--narrow { max-width: var(--wrap-narrow); }
        .wrap--wide { max-width: min(96vw, var(--wrap-wide)); }

        .site-header { background: var(--color-top); padding: calc(var(--spacing-unit) * 3) var(--spacing-unit) calc(var(--spacing-unit) * 2); text-align: center; border-bottom: 1px solid var(--color-border); }
        .site-title { font-family: var(--font-logo); font-size: clamp(2.1rem, 5vw, 3.1rem); font-weight: 400; letter-spacing: -0.01em; color: var(--color-ink); margin-bottom: 0.5rem; }
        .tagline { font-family: var(--font-logo); font-size: 1.2rem; font-weight: 400; font-style: italic; color: rgba(26, 26, 26, 0.86); margin-bottom: 1.25rem; }
        .subtitle { font-size: 1rem; color: var(--color-muted); max-width: 500px; margin: 0 auto; }

        .site-main { flex: 1; width: 100%; background: var(--color-bottom); color: var(--color-ink-on-dark); padding: calc(var(--spacing-unit) * 2.25) var(--spacing-unit) calc(var(--spacing-unit) * 3); }
        section { margin-bottom: calc(var(--spacing-unit) * 2.5); }
        h2 { font-family: var(--font-body); font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: inherit; position: relative; padding-bottom: 0.5rem; }
        h2::after { content: ''; position: absolute; bottom: 0; left: 0; width: 2.5rem; height: 2px; background-color: var(--color-accent); }

        .status { display: inline-flex; align-items: center; gap: 0.5rem; background: white; border: 1px solid var(--color-border); padding: 0.5rem 1rem; border-radius: 2rem; font-size: 0.85rem; color: var(--color-muted); margin-top: 1rem; }
        .status-dot { width: 8px; height: 8px; background: var(--color-accent); border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

        footer { border-top: 1px solid var(--color-border); padding: calc(var(--spacing-unit) * 1.5) var(--spacing-unit); text-align: center; margin-top: auto; }
        .creator { font-size: 0.9rem; color: var(--color-muted); margin-bottom: 0.5rem; }
        .creator-name { color: var(--color-ink); font-weight: 500; }
        .copyright { font-size: 0.8rem; color: var(--color-muted); }

        .site-nav { margin-top: calc(var(--spacing-unit) * 1.5); display: flex; justify-content: center; gap: 0.6rem; flex-wrap: wrap; }
        .site-nav a { text-decoration: none; color: var(--color-muted); font-weight: 600; padding: 0.4rem 0.75rem; border-radius: 999px; }
        .site-nav a:hover { color: var(--color-ink); background: rgba(0, 0, 0, 0.04); }

        .shelf { margin: 0 0 calc(var(--spacing-unit) * 2); position: relative; }
        .shelf__head { display: flex; align-items: baseline; justify-content: space-between; gap: 1rem; margin-bottom: 0.75rem; }
        .shelf__head h2 { margin: 0; font-family: var(--font-body); font-weight: 800; font-size: 1.35rem; color: var(--color-ink-on-dark); padding-bottom: 0; }
        .shelf__link { font-weight: 600; text-decoration: none; border-bottom: 1px solid currentColor; color: var(--color-ink-on-dark); opacity: 0.85; }
        
        .shelf__rail {
            overflow-x: auto;
            overflow-y: visible;
            scroll-snap-type: x mandatory;
            padding: 0.5rem 0 1.5rem; /* Reduced Gap Fix */
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            position: relative;
            padding-inline: 24px;
            scroll-padding-left: 24px;
            scroll-padding-right: 24px;
        }
        .shelf__rail::-webkit-scrollbar { display: none; }

        .shelf__list { display: grid; grid-auto-flow: column; grid-auto-columns: clamp(260px, 28vw, 440px); gap: 1rem; list-style: none; padding: 0; margin: 0; overflow: visible; }
        
        .card { position: relative; scroll-snap-align: start; transition: transform 180ms ease; --hover-scale: 1; --hover-shift-x: 0px; --hover-shift-y: 0px; transform: translate(var(--hover-shift-x), var(--hover-shift-y)) scale(var(--hover-scale)); }
        .card a.card__link { display: block; text-decoration: none; color: inherit; border-radius: 18px; }
        
        .poster { width: 100%; aspect-ratio: 16 / 9; border-radius: 18px; background: rgba(255,255,255,0.04); position: relative; overflow: visible; }
        .poster img { width: 100%; height: 100%; object-fit: cover; display: block; border-radius: 18px; }

        .meta { color: var(--color-ink-on-dark); margin-top: 0.6rem; }
        .title { font-weight: 700; line-height: 1.2; }
        .year { color: var(--color-muted-on-dark); font-size: 0.95rem; }

        .peek {
            position: absolute;
            left: 0; right: 0; top: 42%;
            bottom: -170px;
            border-radius: 0 0 18px 18px;
            padding: 0.8rem 0.9rem 0.85rem;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.62) 60%, rgba(0,0,0,0.78) 100%);
            color: #fff;
            opacity: 0;
            transform: translateY(10px);
            pointer-events: none;
            transition: opacity 180ms ease, transform 180ms ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            gap: 0.45rem;
        }

        /* --- Tooltip Trigger State Fix --- */
        .card:hover .peek,
        .card:focus-within .peek {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
            z-index: 1;
        }
        .card:focus-within { --hover-scale: 1.16; --hover-shift-y: -10px; z-index: 50; }
        .card:hover, .card:focus-within { transform: scale(1.16) translateY(-10px); z-index: 50; }

        .peek__title { font-weight: 900; font-size: 1.05rem; }
        .peek__award { font-size: 1.02rem; font-weight: 800; color: #2dd4bf; margin-bottom: 0.3rem; }
        .peek__meta { display: flex; flex-wrap: wrap; gap: 0.45rem 0.6rem; margin-top: auto; }
        .peek__pill { border: 1px solid rgba(255,255,255,0.32); border-radius: 999px; padding: 0.16rem 0.6rem; font-size: 0.95rem; background: rgba(0,0,0,0.18); }
        .peek__synopsis, .peek__themes, .peek__take { font-size: 0.92rem; line-height: 1.35; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-box-orient: vertical; }
        .peek__synopsis { -webkit-line-clamp: 3; }
        .peek__take { -webkit-line-clamp: 2; }
        .peek__label { font-weight: 700; color: rgba(255,255,255,0.88); }

        .bbfc-badge { display:inline-flex; align-items:center; justify-content:center; width:1.65rem; height:1.65rem; border-radius:999px; font-weight:800; font-size:0.9rem; border:2px solid rgba(255,255,255,0.85); background: rgba(255,255,255,0.10); }
        .bbfc-12a { background:#f97316; color:#ffffff; }

        /* Truncation styling */
        .expandable.is-truncated { cursor: pointer; position: relative; }
        .expandable.is-truncated::after { content: "…"; position: absolute; right: 0.1rem; bottom: 0; padding-left: 1.2rem; background: linear-gradient(90deg, rgba(0,0,0,0), rgba(0,0,0,0.70) 55%); }

        .ffj-tooltip { position: fixed; z-index: 9999; max-width: min(440px, calc(100vw - 24px)); padding: 10px 12px; border-radius: 14px; background: rgba(12, 12, 14, 0.92); border: 1px solid rgba(255,255,255,0.14); color: rgba(255,255,255,0.95); font-size: 0.88rem; backdrop-filter: blur(10px); }
        .ffj-tooltip[hidden] { display:none; }
        .ffj-tooltip__label { font-weight: 750; color: rgba(72, 211, 199, 0.95); margin-bottom: 4px; }

        @media (hover: none) { .peek { display: none; } }
    </style>
</head>
<body>
    <a class="skip-link" href="#main-content">Skip to main content</a>
    <header class="site-header">
        <div class="wrap wrap--narrow">
            <h1 class="site-title">Family Film Journal</h1>
            <p class="tagline">Cinema that sparks family conversations</p>
            <p class="subtitle">Curated recommendations for parents of children aged 6–12.</p>
            <nav class="site-nav">
                <a href="/films/">Films</a>
                <a href="/collections/">Collections</a>
                <a href="/about/">About</a>
            </nav>
        </div>
    </header>

    <main class="site-main" id="main-content">
        <div class="wrap wrap--wide">
            <section class="shelf"><div class="shelf__head"><h2>New on the Journal</h2></div><div class="shelf__rail"><ul class="shelf__list" id="rail-new"></ul></div></section>
            <section class="shelf"><div class="shelf__head"><h2>Animation Classics</h2></div><div class="shelf__rail"><ul class="shelf__list" id="rail-animation"></ul></div></section>
            <section class="shelf"><div class="shelf__head"><h2>Animals as Animals</h2></div><div class="shelf__rail"><ul class="shelf__list" id="rail-animals"></ul></div></section>
            <section class="shelf"><div class="shelf__head"><h2>Robots with Heart</h2></div><div class="shelf__rail"><ul class="shelf__list" id="rail-robots"></ul></div></section>
            <section class="shelf"><div class="shelf__head"><h2>Grown-up classics</h2></div><div class="shelf__rail"><ul class="shelf__list" id="rail-adult"></ul></div></section>
        </div>
    </main>

    <script>
        const films = {
            "zootropolis": { "title": "Zootropolis", "year": 2016, "runtime": "1h 48m", "bbfc": "PG", "imdb": "8.0", "award": "Oscar® winner", "synopsis": "In a city of animals, a rabbit cop and a con-artist fox uncover a conspiracy.", "themes": "Prejudice • Perseverance • Stereotypes", "ourTake": "Sharp and funny for all ages.", "poster": "/assets/posters/zootropolis.webp" },
            "flow": { "title": "Flow", "year": 2024, "runtime": "1h 25m", "bbfc": "U", "imdb": "8.4", "synopsis": "A lone cat survives a great flood by teaming up with other animals.", "themes": "Survival • Cooperation • Nature", "ourTake": "A stunning dialogue-free journey.", "poster": "/assets/posters/flow.webp" },
            "the-iron-giant": { "title": "The Iron Giant", "year": 1999, "runtime": "1h 26m", "bbfc": "U", "imdb": "8.1", "synopsis": "A boy befriends a giant robot from space that the military wants to destroy.", "themes": "Friendship • Choice • Anti-war", "ourTake": "A masterpiece of emotional storytelling.", "poster": "/assets/posters/the-iron-giant.webp" },
            "spirited-away": { "title": "Spirited Away", "year": 2001, "runtime": "2h 4m", "bbfc": "PG", "imdb": "9.0", "award": "Oscar® winner", "synopsis": "A girl enters a magical realm to save her parents from a witch.", "themes": "Resilience • Identity • Greed", "ourTake": "A breathtakingly original fantasy.", "poster": "/assets/posters/spirited-away.webp" },
            "wall-e": { "title": "WALL·E", "year": 2008, "runtime": "1h 38m", "bbfc": "U", "imdb": "8.4", "synopsis": "A small robot on a deserted Earth embarks on a space journey that decides the fate of mankind.", "themes": "Environment • Love • Technology", "ourTake": "Visual storytelling at its absolute best.", "poster": "/assets/posters/wall-e.webp" }
        };

        const shelves = {
            "rail-new": ["flow", "zootropolis", "spirited-away"],
            "rail-animation": ["zootropolis", "spirited-away"],
            "rail-animals": ["flow"],
            "rail-robots": ["wall-e", "the-iron-giant"],
            "rail-adult": ["spirited-away"]
        };

        function cardHTML(id) {
            const f = films[id];
            return `
                <li class="card">
                    <a class="card__link" href="/films/${id}/">
                        <div class="poster">
                            <img src="${f.poster}" alt="${f.title}">
                            <div class="peek">
                                <div class="peek__title">${f.title}</div>
                                ${f.award ? `<div class="peek__award">${f.award}</div>` : ''}
                                <div class="peek__synopsis expandable" data-label="Synopsis" data-full="${f.synopsis}">${f.synopsis}</div>
                                <div class="peek__themes expandable" data-label="Themes" data-full="${f.themes}"><span class="peek__label">Themes:</span> ${f.themes}</div>
                                <div class="peek__take expandable" data-label="Our take" data-full="${f.ourTake}"><span class="peek__label">Our take:</span> ${f.ourTake}</div>
                                <div class="peek__meta">
                                    <span class="peek__pill">IMDb ${f.imdb}</span>
                                    <span class="peek__pill">${f.year}</span>
                                    <span class="peek__pill"><span class="bbfc-badge bbfc-${f.bbfc.toLowerCase()}">${f.bbfc}</span></span>
                                </div>
                            </div>
                        </div>
                        <div class="meta"><div class="title">${f.title}</div><div class="year">${f.year}</div></div>
                    </a>
                </li>`;
        }

        Object.keys(shelves).forEach(id => {
            const el = document.getElementById(id);
            if (el) el.innerHTML = shelves[id].map(cardHTML).join("");
        });

        // Tooltip logic
        const tooltip = document.getElementById('ffj-tooltip');
        function isTruncated(el) { return el.scrollHeight > el.clientHeight || el.scrollWidth > el.clientWidth; }
        function refreshTruncation() { document.querySelectorAll('.expandable').forEach(el => el.classList.toggle('is-truncated', isTruncated(el))); }
        
        document.addEventListener('pointerover', (e) => {
            const target = e.target.closest('.expandable.is-truncated');
            if (!target) return;
            tooltip.innerHTML = `<div class="ffj-tooltip__label">${target.dataset.label}</div>${target.dataset.full}`;
            tooltip.hidden = false;
            const rect = target.getBoundingClientRect();
            tooltip.style.top = (rect.bottom + window.scrollY + 10) + 'px';
            tooltip.style.left = rect.left + 'px';
        });

        document.addEventListener('pointerout', (e) => { if (e.target.closest('.expandable')) tooltip.hidden = true; });
        window.addEventListener('resize', refreshTruncation);
        setTimeout(refreshTruncation, 100);
    </script>
    <div id="ffj-tooltip" class="ffj-tooltip" hidden></div>
</body>
</html>
